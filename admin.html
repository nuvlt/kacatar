<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ” Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .logo-missing { border: 3px solid #ef4444; }
    .logo-ok { border: 3px solid #10b981; }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Login Screen -->
  <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 p-4">
    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
      <div class="text-center mb-8">
        <div class="text-6xl mb-4">ğŸ”</div>
        <h1 class="text-3xl font-bold text-gray-800">Admin Panel</h1>
        <p class="text-gray-500 mt-2">Logo YÃ¶netim Sistemi</p>
      </div>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">KullanÄ±cÄ± AdÄ±</label>
          <input type="text" id="loginUsername" placeholder="admin" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onkeypress="if(event.key==='Enter') document.getElementById('loginPassword').focus()">
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Åifre</label>
          <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" onkeypress="if(event.key==='Enter') attemptLogin()">
        </div>
        <div id="loginError" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm"></div>
        <button onclick="attemptLogin()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition transform hover:scale-105">ğŸš€ GiriÅŸ Yap</button>
      </div>
    </div>
  </div>

  <!-- Main Panel -->
  <div id="mainPanel" class="hidden">
    <header class="bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-6 py-4">
        <div class="flex justify-between items-center mb-3">
          <div><h1 class="text-2xl font-bold">ğŸ” Admin Panel</h1></div>
          <div class="text-right text-sm">
            <div>Toplam MaÃ§: <span id="totalMatches" class="font-bold">-</span></div>
            <div>Eksik Logo: <span id="missingCount" class="font-bold text-red-300">-</span></div>
          </div>
        </div>
        <div class="flex flex-wrap gap-2">
          <button onclick="manualSync()" class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-semibold">ğŸ”„ MaÃ§larÄ± GÃ¼ncelle</button>
          <button onclick="openSuperligModal()" class="px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-semibold">ğŸ‡¹ğŸ‡· SÃ¼per Lig Ekle</button>
          <button onclick="forceUpdateScores()" class="px-3 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-sm font-semibold">ğŸ”„ SkorlarÄ± GÃ¼ncelle</button>
          <button onclick="openSuperligScoreModal()" class="px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm font-semibold">âš½ SÃ¼per Lig Skorlar</button>
          <button onclick="recalculateAllStats()" class="px-3 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 text-sm font-semibold">ğŸ”„ Stats Hesapla</button>
          <button onclick="logout()" class="px-3 py-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 text-sm">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
        </div>
      </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 py-4">
      <div class="bg-white rounded-lg shadow p-4 flex gap-4 items-center">
        <input type="text" id="searchInput" placeholder="ğŸ” TakÄ±m adÄ± ara..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg">
        <div class="flex gap-2">
          <button onclick="filterMatches('all')" class="filter-btn px-4 py-2 rounded-lg bg-gray-200 ring-2 ring-blue-500 font-bold">TÃ¼mÃ¼</button>
          <button onclick="filterMatches('missing')" class="filter-btn px-4 py-2 rounded-lg bg-red-100 text-red-700">Eksikler</button>
          <button onclick="filterMatches('complete')" class="filter-btn px-4 py-2 rounded-lg bg-green-100 text-green-700">Tamamlar</button>
        </div>
        <button onclick="loadMatches()" class="px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold">ğŸ”„</button>
      </div>
    </div>

    <main class="max-w-7xl mx-auto px-6 pb-8">
      <div id="matchesContainer" class="grid gap-4"><div class="text-center py-8"><div class="animate-spin inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"></div></div></div>
    </main>

    <!-- Modals -->
    <div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
        <h3 class="text-xl font-bold mb-4">ğŸ“ Logo GÃ¼ncelle</h3>
        <div class="mb-4"><label class="block text-sm font-semibold mb-2">TakÄ±m AdÄ±</label><input type="text" id="editTeamName" readonly class="w-full px-4 py-2 bg-gray-100 rounded-lg"></div>
        <div class="mb-4"><label class="block text-sm font-semibold mb-2">Logo URL</label><input type="url" id="editLogoUrl" placeholder="https://example.com/logo.png" class="w-full px-4 py-2 border rounded-lg"></div>
        <div class="mb-4"><label class="block text-sm font-semibold mb-2">Ã–nizleme</label><div class="flex justify-center p-4 bg-gray-50 rounded-lg"><img id="previewImage" src="" class="w-24 h-24 object-contain" style="display:none;"><div id="previewPlaceholder" class="w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center">ğŸ–¼ï¸</div></div></div>
        <div class="flex gap-3"><button onclick="closeModal()" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">Ä°ptal</button><button onclick="saveLogoUpdate()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold">ğŸ’¾ Kaydet</button></div>
      </div>
    </div>

    <div id="superligModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
        <h3 class="text-xl font-bold mb-4">ğŸ‡¹ğŸ‡· SÃ¼per Lig MaÃ§Ä± Ekle</h3>
        <div class="space-y-4">
          <div><label class="block text-sm font-semibold mb-2">Ev Sahibi</label><input type="text" id="slHomeTeam" class="w-full px-4 py-2 border rounded-lg"></div>
          <div><label class="block text-sm font-semibold mb-2">Deplasman</label><input type="text" id="slAwayTeam" class="w-full px-4 py-2 border rounded-lg"></div>
          <div><label class="block text-sm font-semibold mb-2">Tarih</label><input type="date" id="slDate" class="w-full px-4 py-2 border rounded-lg"></div>
          <div><label class="block text-sm font-semibold mb-2">Saat</label><input type="time" id="slTime" class="w-full px-4 py-2 border rounded-lg"></div>
        </div>
        <div class="flex gap-3 mt-6"><button onclick="closeSuperligModal()" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">Ä°ptal</button><button onclick="addSuperligMatch()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold">â• Ekle</button></div>
      </div>
    </div>

    <div id="superligScoreModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
      <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full p-6 my-8">
        <div class="flex justify-between items-center mb-6"><h3 class="text-2xl font-bold">âš½ SÃ¼per Lig Skorlar</h3><button onclick="closeSuperligScoreModal()" class="text-gray-400 text-3xl">Ã—</button></div>
        <div id="superligMatchesList" class="space-y-4"></div>
        <div class="flex justify-end mt-6 pt-6 border-t"><button onclick="closeSuperligScoreModal()" class="px-6 py-2 bg-gray-200 rounded-lg font-semibold">Kapat</button></div>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    firebase.initializeApp({apiKey:"AIzaSyDeCQtEWfOyE1hnJHb_W2ktSTqkfUjPJNc",authDomain:"kac-atar.firebaseapp.com",projectId:"kac-atar"});
    const db=firebase.firestore();let allMatches=[],currentFilter='all',editingMatch=null,editingTeamType=null;
    const PLACEHOLDER="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Crect fill='%23fee2e2'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' font-size='32' fill='%23dc2626'%3E%3F%3C/text%3E%3C/svg%3E";

    window.attemptLogin=async()=>{const u=document.getElementById('loginUsername').value.trim(),p=document.getElementById('loginPassword').value,e=document.getElementById('loginError');try{const r=await fetch('/api/admin?action=check-auth',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,password:p})}),d=await r.json();if(d.ok){sessionStorage.setItem('adminLoggedIn','true');document.getElementById('loginScreen').classList.add('hidden');document.getElementById('mainPanel').classList.remove('hidden');loadMatches()}else{e.textContent='âŒ '+(d.message||'GiriÅŸ baÅŸarÄ±sÄ±z');e.classList.remove('hidden');document.getElementById('loginPassword').value=''}}catch(err){e.textContent='âŒ BaÄŸlantÄ± hatasÄ±';e.classList.remove('hidden')}};

    window.logout=()=>{if(confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')){sessionStorage.removeItem('adminLoggedIn');document.getElementById('mainPanel').classList.add('hidden');document.getElementById('loginScreen').classList.remove('hidden')}};

    window.manualSync=async()=>{const btn=document.getElementById('syncBtn'),ot=btn.textContent;btn.disabled=true;btn.textContent='â³...';try{const k=prompt('ğŸ”‘ Secret Key:');if(!k)return;const r=await fetch(`/api/sync-matches?key=${k}`),d=await r.json();d.ok?alert(`âœ… ${d.message}\nToplam: ${d.stats.totalMatches}`):alert('âŒ '+d.error);await loadMatches()}catch(e){alert('âŒ Hata')}finally{btn.disabled=false;btn.textContent=ot}};

    window.openSuperligModal=()=>document.getElementById('superligModal').classList.remove('hidden');
    window.closeSuperligModal=()=>{document.getElementById('superligModal').classList.add('hidden');document.getElementById('slHomeTeam').value='';document.getElementById('slAwayTeam').value='';document.getElementById('slDate').value='';document.getElementById('slTime').value=''};

    window.addSuperligMatch=async()=>{const h=document.getElementById('slHomeTeam').value.trim(),a=document.getElementById('slAwayTeam').value.trim(),d=document.getElementById('slDate').value,t=document.getElementById('slTime').value;if(!h||!a||!d)return alert('âš ï¸ Eksik bilgi');try{const k=prompt('ğŸ”‘ Secret Key:');if(!k)return;const r=await fetch('/api/admin?action=add-superlig-match',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:k,home:h,away:a,date:d,time:t})}),res=await r.json();res.ok?(alert(`âœ… ${res.message}`),closeSuperligModal(),await loadMatches()):alert(`âŒ ${res.error}`)}catch(e){alert('âŒ Hata')}};

    window.openSuperligScoreModal=async()=>{document.getElementById('superligScoreModal').classList.remove('hidden');await loadPendingSuperligMatches()};
    window.closeSuperligScoreModal=()=>document.getElementById('superligScoreModal').classList.add('hidden');

    async function loadPendingSuperligMatches(){const c=document.getElementById('superligMatchesList');c.innerHTML='<div class="text-center py-8"><div class="animate-spin inline-block w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full"></div></div>';try{let k=sessionStorage.getItem('adminKey');if(!k){k=prompt('ğŸ”‘ Admin Key:');if(!k)return;sessionStorage.setItem('adminKey',k)}const r=await fetch('/api/admin?action=get-pending-superlig',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:k})}),d=await r.json();if(!d.ok){if(r.status===403){sessionStorage.removeItem('adminKey');alert('âŒ GeÃ§ersiz key');await loadPendingSuperligMatches();return}throw new Error(d.error)}const m=d.matches||[];if(m.length===0){c.innerHTML='<div class="text-center py-8"><div class="text-6xl mb-4">âœ…</div><p>Bekleyen maÃ§ yok</p></div>';return}c.innerHTML=m.map((mt,i)=>`<div class="border rounded-lg p-4"><div class="flex justify-between mb-4"><div class="flex gap-4 flex-1"><div class="text-center flex-1">${mt.homeLogo?`<img src="${mt.homeLogo}" class="w-12 h-12 mx-auto mb-2 object-contain">`:''}< p class="font-bold text-sm">${mt.home}</p></div><div class="text-center px-4"><p class="text-2xl font-bold text-gray-400">VS</p></div><div class="text-center flex-1">${mt.awayLogo?`<img src="${mt.awayLogo}" class="w-12 h-12 mx-auto mb-2 object-contain">`:''}<p class="font-bold text-sm">${mt.away}</p></div></div><div class="text-right"><p class="text-xs text-gray-500">${new Date(mt.date).toLocaleDateString('tr-TR')}</p><p class="text-xs text-orange-600 font-semibold">${mt.count} tahmin</p></div></div><div class="flex gap-3"><div class="flex-1 flex gap-2"><input type="number" min="0" max="10" id="homeScore_${i}" class="w-16 h-12 text-center text-xl font-bold border-2 rounded-lg"><span class="text-2xl font-bold text-gray-400">-</span><input type="number" min="0" max="10" id="awayScore_${i}" class="w-16 h-12 text-center text-xl font-bold border-2 rounded-lg"></div><button onclick="submitSingleMatchScore('${mt.matchId}',${i})" class="px-6 py-3 bg-orange-500 text-white rounded-lg font-semibold">ğŸ’¾ Kaydet</button></div></div>`).join('')}catch(e){c.innerHTML='<div class="text-center py-8 text-red-500"><p>âŒ Hata</p></div>'}}

    window.submitSingleMatchScore=async(mid,i)=>{const h=document.getElementById(`homeScore_${i}`).value,a=document.getElementById(`awayScore_${i}`).value;if(!h||!a)return alert('âš ï¸ Skor girin');const sc=`${h}-${a}`;if(!confirm(`ğŸ¯ Skor: ${sc}\n\nTÃœM tahminler gÃ¼ncellenecek. Emin misiniz?`))return;try{let k=sessionStorage.getItem('adminKey');if(!k){k=prompt('ğŸ”‘ Secret Key:');if(!k)return;sessionStorage.setItem('adminKey',k)}const btn=event.target,ot=btn.textContent;btn.disabled=true;btn.textContent='â³...';const r=await fetch('/api/admin?action=manual-superlig-scores',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:k,matchId:mid,actualScore:sc})}),res=await r.json();if(res.ok){btn.textContent='âœ…';btn.classList.add('bg-green-500');setTimeout(async()=>await loadPendingSuperligMatches(),1500)}else{r.status===403?(sessionStorage.removeItem('adminKey'),alert('âŒ Key yanlÄ±ÅŸ')):alert(`âŒ ${res.error}`);btn.disabled=false;btn.textContent=ot}}catch(e){alert('âŒ Hata');event.target.disabled=false;event.target.textContent='ğŸ’¾ Kaydet'}};

    window.forceUpdateScores=async()=>{if(!confirm('ğŸ”„ API\'den skorlarÄ± Ã§ekmek istiyor musunuz?'))return;try{const k=prompt('ğŸ”‘ Secret Key:');if(!k)return;const div=document.createElement('div');div.className='fixed top-4 right-4 bg-blue-500 text-white px-6 py-4 rounded-lg shadow-lg z-50';div.innerHTML='â³ GÃ¼ncelleniyor...';document.body.appendChild(div);const r=await fetch('/api/admin?action=force-update-scores',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:k})}),res=await r.json();div.remove();res.ok?alert(`âœ… ${res.message}\n- Bekleyen: ${res.stats?.totalPending||0}\n- Skor: ${res.stats?.scoresFound||0}\n- GÃ¼ncellenen: ${res.stats?.updated||0}`):alert(`âŒ ${res.error}`)}catch(e){alert('âŒ Hata')}};

    window.recalculateAllStats=async()=>{if(!confirm('âš ï¸ TÃœM stats sÄ±fÄ±rlanacak ve yeniden hesaplanacak.\n\nDevam?'))return;try{let k=sessionStorage.getItem('adminKey');if(!k){k=prompt('ğŸ”‘ Admin Key:');if(!k)return;sessionStorage.setItem('adminKey',k)}const div=document.createElement('div');div.className='fixed top-4 right-4 bg-blue-500 text-white px-6 py-4 rounded-lg shadow-lg z-50';div.innerHTML='â³ HesaplanÄ±yor...';document.body.appendChild(div);const r=await fetch('/api/admin?action=recalculate-all-stats',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:k})}),res=await r.json();div.remove();res.ok?alert(`âœ… ${res.message}\n- Toplam: ${res.stats?.totalUsers||0}\n- GÃ¼ncellenen: ${res.stats?.updatedUsers||0}\n- Atlanan: ${res.stats?.skippedUsers||0}\n- DoÄŸru: ${res.stats?.correctPredictions||0}\n- YanlÄ±ÅŸ: ${res.stats?.wrongPredictions||0}`):(r.status===403?(sessionStorage.removeItem('adminKey'),alert('âŒ Key yanlÄ±ÅŸ')):alert(`âŒ ${res.error}`))}catch(e){alert('âŒ Hata')}};

    if(sessionStorage.getItem('adminLoggedIn')==='true'){document.getElementById('loginScreen').classList.add('hidden');document.getElementById('mainPanel').classList.remove('hidden')}

    window.loadMatches=async()=>{const c=document.getElementById('matchesContainer');c.innerHTML='<div class="text-center py-8"><div class="animate-spin inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"></div></div>';try{const snap=await db.collection("matches").get();allMatches=[];snap.forEach(d=>{const m=d.data();m._id=d.id;allMatches.push(m)});allMatches.sort((a,b)=>new Date(a.date||0)-new Date(b.date||0));const missing=allMatches.reduce((cnt,m)=>cnt+(!m.homeLogo?1:0)+(!m.awayLogo?1:0),0);document.getElementById('totalMatches').textContent=allMatches.length;document.getElementById('missingCount').textContent=missing;renderMatches()}catch(e){c.innerHTML='<div class="text-center text-red-500">âŒ Hata</div>'}};

    function renderMatches(){const c=document.getElementById('matchesContainer'),st=document.getElementById('searchInput').value.toLowerCase();let f=allMatches.filter(m=>{const hm=!m.homeLogo||m.homeLogo==="",am=!m.awayLogo||m.awayLogo==="",miss=hm||am;if(currentFilter==='missing'&&!miss)return false;if(currentFilter==='complete'&&miss)return false;if(st){const h=(m.home||"").toLowerCase(),a=(m.away||"").toLowerCase();return h.includes(st)||a.includes(st)}return true});if(f.length===0){c.innerHTML='<div class="text-center py-8">ğŸ˜Š MaÃ§ yok</div>';return}c.innerHTML=f.map(m=>{const h=m.home||"?",a=m.away||"?",hl=m.homeLogo||PLACEHOLDER,al=m.awayLogo||PLACEHOLDER,dt=m.date?new Date(m.date).toLocaleDateString('tr-TR'):"?",hc=m.homeLogo?"logo-ok":"logo-missing",ac=m.awayLogo?"logo-ok":"logo-missing";return`<div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between mb-3"><span class="text-xs text-gray-500">${dt}</span><span class="text-xs text-gray-400">${m.league||""}</span></div><div class="grid grid-cols-3 gap-4 items-center"><div class="text-center"><img src="${hl}" alt="${h}" class="w-16 h-16 mx-auto mb-2 object-contain ${hc} cursor-pointer" onclick="openEditModal('${m._id}','home')"><p class="font-semibold text-sm">${h}</p></div><div class="text-center"><span class="text-2xl font-bold text-gray-400">VS</span></div><div class="text-center"><img src="${al}" alt="${a}" class="w-16 h-16 mx-auto mb-2 object-contain ${ac} cursor-pointer" onclick="openEditModal('${m._id}','away')"><p class="font-semibold text-sm">${a}</p></div></div></div>`}).join('')}

    window.filterMatches=f=>{currentFilter=f;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('ring-2','ring-blue-500','font-bold'));event.target.classList.add('ring-2','ring-blue-500','font-bold');renderMatches()};

    document.getElementById('searchInput').addEventListener('input',renderMatches);

    window.openEditModal=(mid,tt)=>{const m=allMatches.find(x=>x._id===mid);if(!m)return;editingMatch=m;editingTeamType=tt;const tn=tt==='home'?m.home:m.away,cl=tt==='home'?m.homeLogo:m.awayLogo;document.getElementById('editTeamName').value=tn;document.getElementById('editLogoUrl').value=cl||"";if(cl){document.getElementById('previewImage').src=cl;document.getElementById('previewImage').style.display='block';document.getElementById('previewPlaceholder').style.display='none'}else{document.getElementById('previewImage').style.display='none';document.getElementById('previewPlaceholder').style.display='flex'}document.getElementById('editModal').classList.remove('hidden')};

    window.closeModal=()=>{document.getElementById('editModal').classList.add('hidden');editingMatch=null;editingTeamType=null};

    document.getElementById('editLogoUrl').addEventListener('input',e=>{const u=e.target.value.trim(),p=document.getElementById('previewImage'),ph=document.getElementById('previewPlaceholder');if(u){p.src=u;p.style.display='block';ph.style.display='none'}else{p.style.display='none';ph.style.display='flex'}});

    window.saveLogoUpdate=async()=>{if(!editingMatch||!editingTeamType)return;const url=document.getElementById('editLogoUrl').value.trim(),tn=editingTeamType==='home'?editingMatch.home:editingMatch.away;if(!url)return alert('âš ï¸ URL girin');if(sessionStorage.getItem('adminLoggedIn')!=='true')return alert('âŒ GiriÅŸ yapÄ±n');try{let k=sessionStorage.getItem('adminKey');if(!k){k=prompt('ğŸ”‘ Admin Key:');if(!k)return;sessionStorage.setItem('adminKey',k)}const r=await fetch('/api/admin?action=update-logo',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({teamName:tn,logoUrl:url,adminKey:k})}),res=await r.json();if(r.ok&&res.ok){alert(`âœ… ${res.message}\n${res.updatedMatches} maÃ§ gÃ¼ncellendi`);closeModal();await loadMatches()}else{r.status===403?(sessionStorage.removeItem('adminKey'),alert('âŒ Key yanlÄ±ÅŸ')):alert(`âŒ ${res.error}`)}}catch(e){alert('âŒ Hata')}};
  </script>
</body>
</html>
