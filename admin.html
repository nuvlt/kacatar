// admin.html i√ßinde - saveLogoUpdate fonksiyonunu deƒüi≈ütir

window.saveLogoUpdate = async function() {
  if (!editingMatch || !editingTeamType) return;

  const newLogoUrl = document.getElementById('editLogoUrl').value.trim();
  const teamName = editingTeamType === 'home' ? editingMatch.home : editingMatch.away;

  if (!newLogoUrl) {
    alert('‚ö†Ô∏è L√ºtfen bir logo URL\'i girin!');
    return;
  }

  try {
    // SECRET_KEY iste
    const adminKey = prompt('üîë Admin Key:');
    if (!adminKey) {
      alert('‚ùå Admin key gerekli!');
      return;
    }

    // Backend API'ye g√∂nder
    const response = await fetch('/api/update-logo', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        teamName: teamName,
        logoUrl: newLogoUrl,
        adminKey: adminKey
      })
    });

    const result = await response.json();

    if (response.ok && result.ok) {
      alert(`‚úÖ ${result.message}\n${result.updatedMatches} ma√ß g√ºncellendi.`);
      closeModal();
      await loadMatches();
    } else {
      alert(`‚ùå Hata: ${result.error}`);
    }
  } catch (error) {
    console.error("Save error:", error);
    alert('‚ùå Kaydetme hatasƒ±: ' + error.message);
  }
};
